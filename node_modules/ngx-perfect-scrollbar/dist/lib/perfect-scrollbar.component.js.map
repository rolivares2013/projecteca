{"version":3,"file":"perfect-scrollbar.component.js","sourceRoot":"","sources":["../../src/lib/perfect-scrollbar.component.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,MAAM,CAAC;AAEjD,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,oBAAoB,EAAE,MAAM,gBAAgB,CAAC;AAEtE,OAAO,EAAE,WAAW,EAAE,MAAM,eAAe,CAAC;AAC5C,OAAO,EAAE,iBAAiB,EAAE,MAAM,iBAAiB,CAAC;AACpD,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,EACJ,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,WAAW,EACpE,SAAS,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,MAAM,eAAe,CAAC;AAEzE,OAAO,EAAE,yBAAyB,EAAE,MAAM,+BAA+B,CAAC;AAE1E,OAAO,EAAyB,sBAAsB,EACnB,MAAM,gCAAgC,CAAC;;IA8DxE,mCAAoB,IAAY,EAAU,KAAwB,EACnC;QADX,SAAI,GAAJ,IAAI,CAAQ;QAAU,UAAK,GAAL,KAAK,CAAmB;QACnC,eAAU,GAAV,UAAU;sBArDpB,EAAE;0BAEM,KAAK;0BACL,KAAK;2BAEJ,KAAK;+BAED,CAAC;+BACD,CAAC;gCAEA,CAAC;gCACD,CAAC;+BAED,KAAK;+BACL,KAAK;iCAEH,KAAK;iCACL,KAAK;4BAEJ,IAAI;yBAEE,IAAI,OAAO,EAAE;2BAET,IAAI,OAAO,EAAE;wBAEhC,KAAK;0BAEH,IAAI;+BAGC,KAAK;gCAGJ,KAAK;yBAID,IAAI,YAAY,EAAO;yBACvB,IAAI,YAAY,EAAO;0BAEtB,IAAI,YAAY,EAAO;4BACrB,IAAI,YAAY,EAAO;4BACvB,IAAI,YAAY,EAAO;6BACtB,IAAI,YAAY,EAAO;2BAEzB,IAAI,YAAY,EAAO;6BACrB,IAAI,YAAY,EAAO;2BACzB,IAAI,YAAY,EAAO;6BACrB,IAAI,YAAY,EAAO;KAKf;;;;IAErD,4CAAQ;;;IAAR;QAAA,iBAsJC;QArJC,EAAE,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,WAAW;iBACb,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,EACzB,oBAAoB,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAI,CAAC,YAAY,CAAC,EAA/B,CAA+B,CAAC,CAChE;iBACA,SAAS,CAAC,UAAC,KAAa;gBACvB,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,IAAI,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC;oBACvD,MAAM,CAAC,YAAY,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC;oBAEvC,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;iBAC1B;gBAED,EAAE,CAAC,CAAC,KAAK,KAAK,GAAG,IAAI,KAAK,KAAK,GAAG,CAAC,CAAC,CAAC;oBACnC,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oBAEzB,EAAE,CAAC,CAAC,KAAK,KAAK,GAAG,CAAC,CAAC,CAAC;wBAClB,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC;wBAExB,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC;wBACzB,KAAI,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;wBAE1B,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC;4BACjD,KAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;yBAChC;qBACF;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,GAAG,CAAC,CAAC,CAAC;wBACzB,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC;wBAExB,KAAI,CAAC,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC;wBACxB,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;wBAE3B,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC;4BACjD,KAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;yBAChC;qBACF;iBACF;gBAAC,IAAI,CAAC,CAAC;oBACN,EAAE,CAAC,CAAC,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC;wBAC1C,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC;wBACzB,KAAI,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;wBAE1B,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;wBAE1B,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC;4BACjD,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;yBACxB;qBACF;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;wBACjD,KAAI,CAAC,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC;wBACxB,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;wBAE3B,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;wBAE1B,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC;4BACjD,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;yBACxB;qBACF;oBAED,EAAE,CAAC,CAAC,KAAI,CAAC,eAAe,IAAI,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC;wBAC1D,KAAI,CAAC,YAAY,GAAG,MAAM,CAAC,UAAU,CAAC;4BACpC,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC;4BACxB,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC;4BAExB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;4BAEzB,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,IAAI,CAAC,KAAI,CAAC,MAAM,CAAC,IAAI,IAAI,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gCAChE,KAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;6BAC/B;4BAED,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,IAAI,CAAC,KAAI,CAAC,MAAM,CAAC,GAAG,IAAI,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gCAChE,KAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;6BAC/B;4BAED,KAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;yBAC3B,EAAE,GAAG,CAAC,CAAC;qBACT;iBACF;gBAED,KAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;gBAC1B,KAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;aAC5B,CAAC,CAAC;YAEL,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC;gBAC1B,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;oBACtB,qBAAM,OAAO,GAAG,KAAI,CAAC,YAAY,CAAC,UAAU,CAAC,aAAa,CAAC;oBAE3D,SAAS,CAAa,OAAO,EAAE,OAAO,CAAC;yBACpC,IAAI,CACH,SAAS,CAAC,KAAI,CAAC,SAAS,CAAC,CAC1B;yBACA,SAAS,CAAC,UAAC,KAAiB;wBAC3B,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,IAAI,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC;4BAC3C,qBAAM,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC;4BAClC,qBAAM,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC;4BAElC,KAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;yBAC1D;qBACF,CAAC,CAAC;oBAEL,SAAS,CAAa,OAAO,EAAE,WAAW,CAAC;yBACxC,IAAI,CACH,SAAS,CAAC,KAAI,CAAC,SAAS,CAAC,CAC1B;yBACA,SAAS,CAAC,UAAC,KAAiB;wBAC3B,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,IAAI,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC;4BAC3C,qBAAM,eAAe,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;4BACjD,qBAAM,eAAe,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;4BAEjD,qBAAM,YAAY,GAAG,eAAe,GAAG,KAAI,CAAC,eAAe,CAAC;4BAC5D,qBAAM,YAAY,GAAG,eAAe,GAAG,KAAI,CAAC,eAAe,CAAC;4BAE5D,KAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;4BAEzD,KAAI,CAAC,eAAe,GAAG,eAAe,CAAC;4BACvC,KAAI,CAAC,eAAe,GAAG,eAAe,CAAC;yBACxC;qBACF,CAAC,CAAC;oBAEH,KAAK,CACH,SAAS,CAAC,OAAO,EAAE,aAAa,CAAC;yBAC9B,IAAI,CAAC,GAAG,CAAC,UAAC,KAAU,IAAK,OAAA,KAAK,CAAC,KAAK,GAAG,GAAG,EAAjB,CAAiB,CAAC,CAAC,EAC/C,SAAS,CAAC,OAAO,EAAE,aAAa,CAAC;yBAC9B,IAAI,CAAC,GAAG,CAAC,UAAC,KAAU,IAAK,OAAA,KAAK,CAAC,KAAK,GAAG,GAAG,EAAjB,CAAiB,CAAC,CAAC,EAC/C,SAAS,CAAC,OAAO,EAAE,gBAAgB,CAAC;yBACjC,IAAI,CAAC,GAAG,CAAC,UAAC,KAAU,IAAK,OAAA,KAAK,CAAC,KAAK,GAAG,OAAO,EAArB,CAAqB,CAAC,CAAC,EACnD,SAAS,CAAC,OAAO,EAAE,gBAAgB,CAAC;yBACjC,IAAI,CAAC,GAAG,CAAC,UAAC,KAAU,IAAK,OAAA,KAAK,CAAC,KAAK,GAAG,QAAQ,EAAtB,CAAsB,CAAC,CAAC,EACpD,SAAS,CAAC,OAAO,EAAE,kBAAkB,CAAC;yBACnC,IAAI,CAAC,GAAG,CAAC,UAAC,KAAU,IAAK,OAAA,KAAK,CAAC,KAAK,GAAG,MAAM,EAApB,CAAoB,CAAC,CAAC,EAClD,SAAS,CAAC,OAAO,EAAE,kBAAkB,CAAC;yBACnC,IAAI,CAAC,GAAG,CAAC,UAAC,KAAU,IAAK,OAAA,KAAK,CAAC,KAAK,GAAG,KAAK,EAAnB,CAAmB,CAAC,CAAC,CAClD;yBACA,IAAI,CACH,SAAS,CAAC,KAAI,CAAC,SAAS,CAAC,CAC1B;yBACA,SAAS,CAAC,UAAC,KAAU;wBACpB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,IAAI,CAAC,KAAI,CAAC,eAAe,IAAI,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;4BACtE,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;yBACpC;qBACF,CAAC,CAAC;iBACN;aACF,CAAC,CAAC;YAEH,MAAM,CAAC,UAAU,CAAC;gBAChB,sBAAsB,CAAC,OAAO,CAAC,UAAC,SAAgC;oBAC9D,EAAE,CAAC,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;wBACtB,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,KAAI,CAAC,SAAS,CAAC,CAAC;qBAChD;iBACF,CAAC,CAAC;aACJ,EAAE,CAAC,CAAC,CAAC;SACP;KACF;;;;IAED,+CAAW;;;IAAX;QACE,EAAE,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;YACtB,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;YAE7B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC;gBACvD,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;aACxC;SACF;KACF;;;;IAED,6CAAS;;;IAAT;QACE,EAAE,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YACvC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAChE,qBAAM,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,aAAa,CAAC;gBAE3D,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;gBAElE,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;aACnE;SACF;KACF;;;;;;;IAEO,oDAAgB;;;;;;cAAC,KAAU,EAAE,MAAc,EAAE,MAAc;QACjE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAExB,qBAAM,gBAAgB,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/C,qBAAM,gBAAgB,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE/C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC;YAC9C,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,CAAC,IAAI,CAAC,iBAAiB;gBACjD,CAAC,IAAI,CAAC,gBAAgB,KAAK,gBAAgB,CAAC,CAAC,CAAC;YAC9C,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,CAAC,IAAI,CAAC,iBAAiB;gBACjD,CAAC,IAAI,CAAC,gBAAgB,KAAK,gBAAgB,CAAC,CAAC,CAAC,CAAC,CACnD,CAAC;YACC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;SACzB;QAED,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;SAC1C;QAED,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;SAC1C;QAED,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAErC,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;;;gBAxQ9B,SAAS,SAAC;oBACT,QAAQ,EAAE,mBAAmB;oBAC7B,QAAQ,EAAE,qBAAqB;oBAC/B,yzBAA8D;oBAE9D,aAAa,EAAE,iBAAiB,CAAC,IAAI;;iBACtC;;;;gBAfQ,MAAM;gBAEiB,iBAAiB;6CAoE5C,MAAM,SAAC,WAAW;;;6BA5BpB,KAAK;+BAEL,KAAK;oCAEL,WAAW,SAAC,sBAAsB,cAClC,KAAK;qCAEL,WAAW,SAAC,sBAAsB,cAClC,KAAK;2BAEL,KAAK;8BAEL,MAAM;8BACN,MAAM;+BAEN,MAAM;iCACN,MAAM;iCACN,MAAM;kCACN,MAAM;gCAEN,MAAM;kCACN,MAAM;gCACN,MAAM;kCACN,MAAM;iCAEN,SAAS,SAAC,yBAAyB;;oCAzEtC;;SAsBa,yBAAyB","sourcesContent":["import { Subject, merge, fromEvent } from 'rxjs';\n\nimport { map, takeUntil, distinctUntilChanged } from 'rxjs/operators';\n\nimport { PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { NgZone, Inject, Component,\n  OnInit, OnDestroy, DoCheck, Input, Output, EventEmitter, HostBinding,\n  ViewChild, ViewEncapsulation, ChangeDetectorRef } from '@angular/core';\n\nimport { PerfectScrollbarDirective } from './perfect-scrollbar.directive';\n\nimport { PerfectScrollbarEvent, PerfectScrollbarEvents,\n  PerfectScrollbarConfigInterface } from './perfect-scrollbar.interfaces';\n\n@Component({\n  selector: 'perfect-scrollbar',\n  exportAs: 'ngxPerfectScrollbar',\n  templateUrl: '../../dist/lib/perfect-scrollbar.component.html',\n  styleUrls: [ '../../dist/lib/perfect-scrollbar.component.css' ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class PerfectScrollbarComponent implements OnInit, OnDestroy, DoCheck {\n  public states: any = {};\n\n  public indicatorX: boolean = false;\n  public indicatorY: boolean = false;\n\n  public interaction: boolean = false;\n\n  private scrollPositionX: number = 0;\n  private scrollPositionY: number = 0;\n\n  private scrollDirectionX: number = 0;\n  private scrollDirectionY: number = 0;\n\n  private usePropagationX: boolean = false;\n  private usePropagationY: boolean = false;\n\n  private allowPropagationX: boolean = false;\n  private allowPropagationY: boolean = false;\n\n  private stateTimeout: number | null = null;\n\n  private readonly ngDestroy: Subject<void> = new Subject();\n\n  private readonly stateUpdate: Subject<string> = new Subject();\n\n  @Input() disabled: boolean = false;\n\n  @Input() usePSClass: boolean = true;\n\n  @HostBinding('class.ps-show-limits')\n  @Input() autoPropagation: boolean = false;\n\n  @HostBinding('class.ps-show-active')\n  @Input() scrollIndicators: boolean = false;\n\n  @Input() config?: PerfectScrollbarConfigInterface;\n\n  @Output() psScrollY: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psScrollX: EventEmitter<any> = new EventEmitter<any>();\n\n  @Output() psScrollUp: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psScrollDown: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psScrollLeft: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psScrollRight: EventEmitter<any> = new EventEmitter<any>();\n\n  @Output() psYReachEnd: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psYReachStart: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psXReachEnd: EventEmitter<any> = new EventEmitter<any>();\n  @Output() psXReachStart: EventEmitter<any> = new EventEmitter<any>();\n\n  @ViewChild(PerfectScrollbarDirective) directiveRef?: PerfectScrollbarDirective;\n\n  constructor(private zone: NgZone, private cdRef: ChangeDetectorRef,\n    @Inject(PLATFORM_ID) private platformId: Object) {}\n\n  ngOnInit(): void {\n    if (isPlatformBrowser(this.platformId)) {\n      this.stateUpdate\n        .pipe(\n          takeUntil(this.ngDestroy),\n          distinctUntilChanged((a, b) => (a === b && !this.stateTimeout))\n        )\n        .subscribe((state: string) => {\n          if (this.stateTimeout && typeof window !== 'undefined') {\n            window.clearTimeout(this.stateTimeout);\n\n            this.stateTimeout = null;\n          }\n\n          if (state === 'x' || state === 'y') {\n            this.interaction = false;\n\n            if (state === 'x') {\n              this.indicatorX = false;\n\n              this.states.left = false;\n              this.states.right = false;\n\n              if (this.autoPropagation && this.usePropagationX) {\n                this.allowPropagationX = false;\n              }\n            } else if (state === 'y') {\n              this.indicatorY = false;\n\n              this.states.top = false;\n              this.states.bottom = false;\n\n              if (this.autoPropagation && this.usePropagationY) {\n                this.allowPropagationY = false;\n              }\n            }\n          } else {\n            if (state === 'left' || state === 'right') {\n              this.states.left = false;\n              this.states.right = false;\n\n              this.states[state] = true;\n\n              if (this.autoPropagation && this.usePropagationX) {\n                this.indicatorX = true;\n              }\n            } else if (state === 'top' || state === 'bottom') {\n              this.states.top = false;\n              this.states.bottom = false;\n\n              this.states[state] = true;\n\n              if (this.autoPropagation && this.usePropagationY) {\n                this.indicatorY = true;\n              }\n            }\n\n            if (this.autoPropagation && typeof window !== 'undefined') {\n              this.stateTimeout = window.setTimeout(() => {\n                this.indicatorX = false;\n                this.indicatorY = false;\n\n                this.stateTimeout = null;\n\n                if (this.interaction && (this.states.left || this.states.right)) {\n                  this.allowPropagationX = true;\n                }\n\n                if (this.interaction && (this.states.top || this.states.bottom)) {\n                  this.allowPropagationY = true;\n                }\n\n                this.cdRef.markForCheck();\n              }, 500);\n            }\n          }\n\n          this.cdRef.markForCheck();\n          this.cdRef.detectChanges();\n        });\n\n      this.zone.runOutsideAngular(() => {\n        if (this.directiveRef) {\n          const element = this.directiveRef.elementRef.nativeElement;\n\n          fromEvent<WheelEvent>(element, 'wheel')\n            .pipe(\n              takeUntil(this.ngDestroy)\n            )\n            .subscribe((event: WheelEvent) => {\n              if (!this.disabled && this.autoPropagation) {\n                const scrollDeltaX = event.deltaX;\n                const scrollDeltaY = event.deltaY;\n\n                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\n              }\n            });\n\n          fromEvent<TouchEvent>(element, 'touchmove')\n            .pipe(\n              takeUntil(this.ngDestroy)\n            )\n            .subscribe((event: TouchEvent) => {\n              if (!this.disabled && this.autoPropagation) {\n                const scrollPositionX = event.touches[0].clientX;\n                const scrollPositionY = event.touches[0].clientY;\n\n                const scrollDeltaX = scrollPositionX - this.scrollPositionX;\n                const scrollDeltaY = scrollPositionY - this.scrollPositionY;\n\n                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\n\n                this.scrollPositionX = scrollPositionX;\n                this.scrollPositionY = scrollPositionY;\n              }\n            });\n\n            merge(\n              fromEvent(element, 'ps-scroll-x')\n                .pipe(map((event: any) => event.state = 'x')),\n              fromEvent(element, 'ps-scroll-y')\n                .pipe(map((event: any) => event.state = 'y')),\n              fromEvent(element, 'ps-x-reach-end')\n                .pipe(map((event: any) => event.state = 'right')),\n              fromEvent(element, 'ps-y-reach-end')\n                .pipe(map((event: any) => event.state = 'bottom')),\n              fromEvent(element, 'ps-x-reach-start')\n                .pipe(map((event: any) => event.state = 'left')),\n              fromEvent(element, 'ps-y-reach-start')\n                .pipe(map((event: any) => event.state = 'top')),\n            )\n            .pipe(\n              takeUntil(this.ngDestroy)\n            )\n            .subscribe((event: any) => {\n              if (!this.disabled && (this.autoPropagation || this.scrollIndicators)) {\n                this.stateUpdate.next(event.state);\n              }\n            });\n        }\n      });\n\n      window.setTimeout(() => {\n        PerfectScrollbarEvents.forEach((eventName: PerfectScrollbarEvent) => {\n          if (this.directiveRef) {\n            this.directiveRef[eventName] = this[eventName];\n          }\n        });\n      }, 0);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (isPlatformBrowser(this.platformId)) {\n      this.ngDestroy.next();\n      this.ngDestroy.unsubscribe();\n\n      if (this.stateTimeout && typeof window !== 'undefined') {\n        window.clearTimeout(this.stateTimeout);\n      }\n    }\n  }\n\n  ngDoCheck(): void {\n    if (isPlatformBrowser(this.platformId)) {\n      if (!this.disabled && this.autoPropagation && this.directiveRef) {\n        const element = this.directiveRef.elementRef.nativeElement;\n\n        this.usePropagationX = element.classList.contains('ps--active-x');\n\n        this.usePropagationY = element.classList.contains('ps--active-y');\n      }\n    }\n  }\n\n  private checkPropagation(event: any, deltaX: number, deltaY: number): void {\n    this.interaction = true;\n\n    const scrollDirectionX = (deltaX < 0) ? -1 : 1;\n    const scrollDirectionY = (deltaY < 0) ? -1 : 1;\n\n    if ((this.usePropagationX && this.usePropagationY) ||\n        (this.usePropagationX && (!this.allowPropagationX ||\n        (this.scrollDirectionX !== scrollDirectionX))) ||\n        (this.usePropagationY && (!this.allowPropagationY ||\n        (this.scrollDirectionY !== scrollDirectionY))))\n    {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    if (!!deltaX) {\n      this.scrollDirectionX = scrollDirectionX;\n    }\n\n    if (!!deltaY) {\n      this.scrollDirectionY = scrollDirectionY;\n    }\n\n    this.stateUpdate.next('interaction');\n\n    this.cdRef.detectChanges();\n  }\n}\n"]}